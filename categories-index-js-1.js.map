{"version":3,"sources":["webpack:///./src/pages/categories/index.js","webpack:///./src/utils/fetch-json.js","webpack:///./src/components/sortable-list/index.js","webpack:///./src/components/notification/index.js"],"names":["CategoriesPage","event","categoryHeader","target","closest","classList","toggle","async","detail","list","data","children","map","item","index","id","dataset","weight","fetchJson","method","headers","body","JSON","stringify","this","renderNotification","e","element","querySelectorAll","reduce","accum","subElement","categoriesContainer","subElements","category","document","createElement","innerHTML","getTemplate","firstElementChild","getSubElements","categories","getCategories","renderCategories","addEventListeners","url","URL","process","searchParams","set","href","title","join","addSubcategories","categoriesWrappers","getCategoriesWrappers","forEach","subcategories","sortableList","SortableList","items","renderSubcategoryItem","querySelector","append","count","addEventListener","onSortableListReorder","onPointerDown","message","type","NotificationMessage","duration","show","removeEventListeners","removeEventListener","remove","destroy","component","Object","values","components","params","response","fetch","toString","err","FetchError","ok","errorText","statusText","json","error","status","Error","constructor","super","window","reason","alert","offsetX","removeItem","preventDefault","startDragItem","clientX","clientY","dragItemTop","sizes","height","dragItemLeft","shiftX","top","elementTop","bottom","elementBottom","getBoundingClientRect","onPointerUp","dragItem","style","left","display","sortableItemBelow","elementFromPoint","topBoundry","topPlaceholder","placeholder","before","stopDragItem","onPointerMove","render","add","width","addItemsToList","offsetLeft","elementInitialIndex","indexOf","getPlaceholder","replaceChild","placeholderIndex","cssText","dispatchEvent","CustomEvent","bubbles","instance","container","timer","setTimeout","bind","clearTimeout"],"mappings":"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","file":"categories-index-js-1.js","sourcesContent":["import SortableList from '../../components/sortable-list/index.js';\nimport NotificationMessage from '../../components/notification/index.js';\nimport fetchJson from '../../utils/fetch-json.js';\n\nexport default class CategoriesPage {\n  subElements = {};\n  components = {};\n\n  onPointerDown = event => {\n    const categoryHeader = event.target.closest('.category__header')\n    if (categoryHeader) {\n      categoryHeader.closest('.category')\n        .classList\n        .toggle('category_open');\n    }\n  }\n\n  onSortableListReorder = async ({ detail: list }) => {\n    const data = [...list.children]\n      .map((item, index) => ({\n        id: item.dataset.id,\n        weight: index + 1\n      }));\n\n    try {\n      await fetchJson(`${process.env.BACKEND_URL}${process.env.DATA_API}/subcategories`, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body:  JSON.stringify(data)\n      });\n\n      this.renderNotification('Порядок категорий сохранен!');\n    } catch(e) {\n      this.renderNotification('Порядок категорий не сохранен!', 'error');\n    }\n  }\n\n  get getTemplate() {\n    return `\n      <div class=\"categories\">\n        <div class=\"content__top-panel\">\n          <h1 class=\"page-title\">Категории товаров</h1>\n        </div>\n\n        <div data-element=\"categoriesContainer\" class=\"categoriesContainer\"></div>\n      </div>\n    `;\n  }\n\n  get getSubElements() {\n    const subElements = this.element.querySelectorAll('[data-element]');\n\n    return [...subElements].reduce((accum, subElement) => {\n      accum[subElement.dataset.element] = subElement;\n      return accum;\n    }, {});\n  }\n\n  get getCategoriesWrappers() {\n    const { categoriesContainer } = this.subElements;\n    const categoriesWrappers = categoriesContainer.querySelectorAll(`[data-id]`);\n\n    return [...categoriesWrappers].reduce((accum, category) => {\n      accum[category.dataset.id] = category;\n      return accum;\n    }, {});\n  }\n\n  async render() {\n    const element = document.createElement('div');\n\n    element.innerHTML = this.getTemplate;\n\n    this.element = element.firstElementChild;\n    this.subElements = this.getSubElements;\n\n    this.categories = await this.getCategories();\n    this.renderCategories(this.categories);\n\n    this.addEventListeners();\n\n    return this.element;\n  }\n\n  async getCategories() {\n    const url = new URL(`${process.env.DATA_API}/categories`, process.env.BACKEND_URL);\n    url.searchParams.set(`_sort`, `weight`);\n    url.searchParams.set(`_refs`, `subcategory`);\n\n    return fetchJson(url.href);\n  }\n\n  renderCategories(categories) {\n    const { categoriesContainer } = this.subElements;\n   \n    categoriesContainer.innerHTML = categories\n      .map(({ id, title }) => {\n        return `\n          <div class=\"category category_open\" data-id=\"${id}\">\n            <header class=\"category__header\">\n              ${title}\n            </header>\n            <div class=\"category__body\">\n              <div class=\"subcategory-list\"></div>\n            </div>\n          </div>\n        `;\n      })\n      .join('');\n\n    this.addSubcategories(categories);\n  }\n\n  addSubcategories(categories) {\n    const categoriesWrappers = this.getCategoriesWrappers;\n    \n    categories.forEach(({ id, subcategories }) => {\n      const sortableList = new SortableList({\n        items: subcategories.map(this.renderSubcategoryItem)\n      });\n\n      categoriesWrappers[id]\n        .querySelector('.subcategory-list')\n        .append(sortableList.element);\n    });\n  }\n\n  renderSubcategoryItem({ id, title, count }) {\n    const element = document.createElement('div');\n\n    element.innerHTML = `\n      <li class=\"categories__sortable-list-item sortable-list__item\" data-grab-handle data-id=\"${id}\">\n        <strong>${title}</strong>\n        <span><b>${count}</b> products</span>\n      </li>\n    `;\n\n    return element.firstElementChild;\n  }\n\n  addEventListeners() {\n    const { categoriesContainer } = this.subElements;\n\n    categoriesContainer.addEventListener('sortable-list-reorder', this.onSortableListReorder);\n\n    document.addEventListener('pointerdown', this.onPointerDown);\n  }\n\n  renderNotification(message, type = 'success') {\n    const notification = new NotificationMessage(message, {\n      duration: 2000,\n      type\n    });\n    notification.show();\n  }\n\n  removeEventListeners() {\n    document.removeEventListener('pointerdown', this.onPointerDown);\n  }\n\n  remove() {\n    this.element.remove();\n  }\n\n  destroy() {\n    this.remove();\n\n    this.removeEventListeners();\n\n    for (const component of Object.values(this.components)) {\n      component.destroy();\n    }\n  }\n}","// same as fetch, but throws FetchError in case of errors\r\n// status >= 400 is an error\r\n// network error / json error are errors\r\n\r\nexport default async function(url, params) {\r\n  let response;\r\n\r\n  try {\r\n    // NOTE: \"toString\" call needed for correct work of \"jest-fetch-mock\"\r\n    response = await fetch(url.toString(), params);\r\n  } catch(err) {\r\n    throw new FetchError(response, \"Network error has occurred.\");\r\n  }\r\n\r\n  let body;\r\n\r\n  if (!response.ok) {\r\n    let errorText = response.statusText; // Not Found (for 404)\r\n\r\n    try {\r\n      body = await response.json();\r\n\r\n      errorText = (body.error && body.error.message) || (body.data && body.data.error && body.data.error.message) || errorText;\r\n    } catch (error) { /* ignore failed body */ }\r\n\r\n    let message = `Error ${response.status}: ${errorText}`;\r\n\r\n    throw new FetchError(response, body, message);\r\n  }\r\n\r\n  try {\r\n    return await response.json();\r\n  } catch(err) {\r\n    throw new FetchError(response, null, err.message);\r\n  }\r\n}\r\n\r\nexport class FetchError extends Error {\r\n  name = \"FetchError\";\r\n\r\n  constructor(response, body, message) {\r\n    super(message);\r\n    this.response = response;\r\n    this.body = body;\r\n  }\r\n}\r\n\r\n// handle uncaught failed fetch through\r\nwindow.addEventListener('unhandledrejection', event => {\r\n  if (event.reason instanceof FetchError) {\r\n    alert(event.reason.message);\r\n  }\r\n});\r\n\r\n","export default class SortableList {\r\n  onPointerDown = ({ target, offsetX }) => {\r\n    if (target.closest('[data-delete-handle]')) {\r\n      this.removeItem(target);\r\n    }\r\n\r\n    if (target.closest('[data-grab-handle]')) {\r\n      target.addEventListener('dragstart', event => {\r\n        event.preventDefault();\r\n      });\r\n\r\n      this.startDragItem(target, offsetX);\r\n    }\r\n  }\r\n\r\n  onPointerMove = ({ clientX, clientY }) => {\r\n    const dragItemTop = clientY - this.sizes.height / 2;\r\n    const dragItemLeft = clientX - this.sizes.shiftX;    \r\n    const { top: elementTop, bottom: elementBottom } = this.element.getBoundingClientRect();\r\n\r\n    if (dragItemTop < elementTop || dragItemTop > elementBottom) {\r\n      this.onPointerUp();\r\n      return;\r\n    }\r\n\r\n    this.dragItem.style.top = `${dragItemTop}px`;\r\n    this.dragItem.style.left = `${dragItemLeft}px`;\r\n    this.dragItem.style.display = 'none';\r\n\r\n    const elementBelow = document.elementFromPoint(clientX, clientY);\r\n    const sortableItemBelow = elementBelow.closest(`.sortable-list__item`);\r\n\r\n    if (sortableItemBelow) {\r\n      const {\r\n        top: topBoundry\r\n      } = sortableItemBelow.getBoundingClientRect();\r\n      const {\r\n        top: topPlaceholder\r\n      } = this.placeholder.getBoundingClientRect();\r\n\r\n      if (dragItemTop > topBoundry) {\r\n        this.placeholder.before(sortableItemBelow);\r\n      }\r\n\r\n      if (topBoundry > dragItemTop && topBoundry < topPlaceholder) {\r\n        sortableItemBelow.before(this.placeholder);\r\n      }\r\n    } \r\n    \r\n    this.dragItem.style.display = '';\r\n  }\r\n\r\n  onPointerUp = () => {\r\n    this.stopDragItem();\r\n\r\n    document.removeEventListener('pointermove', this.onPointerMove);    \r\n    this.element.removeEventListener('pointerup', this.onPointerUp);\r\n  }\r\n\r\n  constructor({ items = [] }) {\r\n    this.items = items;\r\n\r\n    this.render();\r\n  }\r\n\r\n  get getPlaceholder() {\r\n    const placeholder = document.createElement('div');\r\n    placeholder.classList.add('sortable-list__placeholder');\r\n\r\n    placeholder.style.width = `${this.sizes.width}px`;\r\n    placeholder.style.height = `${this.sizes.height}px`;\r\n\r\n    return placeholder;\r\n  }\r\n\r\n  render() {\r\n    const element = document.createElement('div');\r\n    element.innerHTML = `<ul class=\"sortable-list\" data-element=\"sortable-list\"></ul>`;\r\n\r\n    this.element = element.firstElementChild;\r\n\r\n    this.addItemsToList();\r\n    this.addEventListeners();\r\n  }\r\n\r\n  addItemsToList() {\r\n    this.items.forEach(item => {\r\n      item.classList.add(`sortable-list__item`);\r\n      this.element.append(item);\r\n    });\r\n  }\r\n\r\n  addEventListeners() {\r\n    this.element.addEventListener('selectstart', event => event.preventDefault());\r\n    this.element.addEventListener('pointerdown', this.onPointerDown);\r\n  }\r\n\r\n  removeItem(target) {\r\n    target.closest(`.sortable-list__item`).remove();\r\n  }\r\n\r\n  startDragItem(target, offsetLeft) {\r\n    this.dragItem = target.closest(`.sortable-list__item`);\r\n    this.elementInitialIndex = [...this.element.children]\r\n      .indexOf(this.dragItem);\r\n\r\n    const { top, left, width, height } = this.dragItem.getBoundingClientRect();\r\n    this.sizes = {\r\n      top,\r\n      left,\r\n      width,\r\n      height,\r\n      shiftX: offsetLeft\r\n    };\r\n    \r\n    this.placeholder = this.getPlaceholder;\r\n    \r\n    this.element.replaceChild(this.placeholder, this.dragItem);\r\n    this.element.append(this.dragItem);\r\n\r\n    this.dragItem.classList.add(`sortable-list__item_dragging`);\r\n    this.dragItem.style.width = `${width}px`;\r\n    this.dragItem.style.height = `${height}px`;\r\n    this.dragItem.style.top = `${top}px`;\r\n    this.dragItem.style.left = `${left}px`;\r\n\r\n    document.addEventListener('pointermove', this.onPointerMove);    \r\n    this.element.addEventListener('pointerup', this.onPointerUp);\r\n  }\r\n\r\n  stopDragItem() {\r\n    const placeholderIndex = [...this.element.children]\r\n      .indexOf(this.placeholder);\r\n\r\n    this.dragItem.style.cssText = ``;\r\n\r\n    this.sizes = {};\r\n\r\n    this.dragItem.classList.remove(`sortable-list__item_dragging`);\r\n    this.element.replaceChild(this.dragItem, this.placeholder);\r\n\r\n    this.placeholder.remove();\r\n    this.placeholder = null;\r\n\r\n    if (this.elementInitialIndex !== placeholderIndex) {\r\n      this.element.dispatchEvent(new CustomEvent('sortable-list-reorder', {\r\n        bubbles: true,\r\n        detail: this.element\r\n      }));\r\n    }\r\n  }\r\n\r\n  remove() {\r\n    this.element.remove();\r\n  }\r\n\r\n  destroy() {\r\n    this.remove();\r\n    this.element = null;\r\n  }\r\n}\r\n","export default class NotificationMessage {\n  constructor(message, {\n    duration = 2000,\n    type = 'success'\n  } = {}) {\n    if (NotificationMessage.instance) {\n      NotificationMessage.instance.remove();\n    }\n\n    this.message = message;\n    this.duration = duration;\n    this.type = type;\n    \n    this.render();\n  }\n\n  render() {\n    const element = document.createElement('div');\n\n    element.innerHTML = `\n      <div class=\"notification notification_${this.type} show\" style=\"--value:${this.duration / 1000}s\">\n        <div class=\"notification__content\">${this.message}</div>\n      </div>\n    `;\n    this.element = element.firstElementChild;\n    NotificationMessage.instance = this;\n  }\n\n  show(container = document.body) {\n    container.append(this.element);\n\n    this.timer = setTimeout(this.remove.bind(this), this.duration);\n  }\n\n  remove() {\n    this.element.remove();\n  }\n\n  destroy() {\n    this.remove();\n    NotificationMessage.instance = null;\n    clearTimeout(this.timer);\n  }\n\n}\n"],"sourceRoot":""}
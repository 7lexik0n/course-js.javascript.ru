{"version":3,"sources":["webpack:///./src/components/sortable-table/index.js","webpack:///./src/components/double-slider/index.js","webpack:///./src/components/filter-panel/index.js","webpack:///./src/pages/products/list/products-header.js","webpack:///./src/pages/products/list/index.js","webpack:///./src/utils/fetch-json.js"],"names":["SortableTable","constructor","headersConfig","url","sorted","id","find","item","sortable","order","isSortLocally","step","start","end","from","to","this","async","bottom","element","getBoundingClientRect","document","documentElement","clientHeight","loading","data","loadData","update","event","column","target","closest","dataset","newOrder","asc","desc","toggleOrder","append","subElements","arrow","sortOnClient","resetCountParams","sortOnServer","URL","process","titleLike","status","render","wrapper","createElement","innerHTML","getTable","firstElementChild","getSubElements","renderRows","initEventListeners","searchParams","set","toISOString","delete","decodeURI","prices","classList","add","fetchJson","toString","remove","addRows","body","getTableRows","rows","childNodes","filterByName","name","getNewData","filterByStatus","filterByPrice","getTableHeader","map","getHeaderRow","join","title","getHeaderSortingArrow","getTableBody","getTableRow","template","header","addEventListener","onSortClick","onWindowScroll","sortedData","sortData","length","arr","sortType","customSorting","direction","sort","a","b","localeCompare","querySelectorAll","reduce","accum","subElement","removeEventListener","destroy","DoubleSlider","min","max","formatValue","value","selected","preventDefault","left","innerLeft","right","innerRight","width","inner","dragging","thumbLeft","newLeft","clientX","shiftX","parseFloat","thumbRight","style","progress","getValue","newRight","onThumbPointerMove","onThumbPointerUp","dispatchEvent","CustomEvent","detail","bubbles","ondragstart","onThumbPointerDown","rangeTotal","Math","floor","thumbElem","round","FilterPanel","sliderMin","sliderMax","getTemplate","initComponents","renderComponents","addEventListeners","doubleSlider","components","Object","entries","forEach","component","filterName","filterStatus","values","category","ProductsPage","filterPanel","sliderFrom","sliderTo","sortableTable","params","response","fetch","err","FetchError","ok","errorText","statusText","json","error","message","Error","super","window","reason","alert"],"mappings":"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","file":"products-list-index-js-5.js","sourcesContent":["import fetchJson from \"../../utils/fetch-json.js\";\r\n\r\nconst URL_PATH = process.env.URL_PATH;\r\n\r\nexport default class SortableTable {\r\n  element;\r\n  subElements = {};\r\n  data = [];\r\n  loading = false;\r\n  step = 20;\r\n  start = 1;\r\n  end = this.start + this.step;\r\n\r\n  onWindowScroll = async() => {\r\n    const { bottom } = this.element.getBoundingClientRect();\r\n    const { id, order } = this.sorted;\r\n    \r\n    if (bottom < document.documentElement.clientHeight && !this.loading && !this.isSortLocally) {\r\n      this.start = this.end;\r\n      this.end = this.start + this.step;\r\n\r\n      this.loading = true;\r\n\r\n      const data = await this.loadData(id, order, this.start, this.end);\r\n      this.update(data);\r\n\r\n      this.loading = false;\r\n    }\r\n  };\r\n\r\n  onSortClick = event => {\r\n    const column = event.target.closest('[data-sortable=\"true\"]');\r\n    const toggleOrder = order => {\r\n      const orders = {\r\n        asc: 'desc',\r\n        desc: 'asc'\r\n      };\r\n\r\n      return orders[order];\r\n    };\r\n\r\n    if (column) {\r\n      const { id, order } = column.dataset;\r\n      const newOrder = toggleOrder(order);\r\n\r\n      this.sorted = {\r\n        id,\r\n        order: newOrder\r\n      };\r\n\r\n      column.dataset.order = newOrder;\r\n      column.append(this.subElements.arrow);\r\n\r\n      if (this.isSortLocally) {\r\n        this.sortOnClient(id, newOrder);\r\n      } else {\r\n        this.resetCountParams();\r\n        this.sortOnServer(id, newOrder);\r\n      }\r\n    }\r\n  };\r\n\r\n  constructor(headersConfig = [], {\r\n    url = '',\r\n    sorted = {\r\n      id: headersConfig.find(item => item.sortable).id,\r\n      order: 'asc'\r\n    },\r\n    isSortLocally = false,\r\n    step = 20,\r\n    start = 0,\r\n    end = start + step,\r\n    from,\r\n    to\r\n  } = {}) {\r\n\r\n    this.headersConfig = headersConfig;\r\n    this.url = new URL(url, process.env.BACKEND_URL);\r\n    this.sorted = sorted;\r\n    this.isSortLocally = isSortLocally;\r\n    this.step = step;\r\n    this.start = start;\r\n    this.end = end;\r\n    this.from = from;\r\n    this.to = to;\r\n    this.titleLike = '';\r\n    this.status = '';\r\n\r\n    this.render();\r\n  }\r\n\r\n  async render() {\r\n    const {id, order} = this.sorted;\r\n    const wrapper = document.createElement('div');\r\n\r\n    wrapper.innerHTML = this.getTable();\r\n\r\n    const element = wrapper.firstElementChild;\r\n\r\n    this.element = element;\r\n    this.subElements = this.getSubElements(element);\r\n\r\n    const data = await this.loadData(id, order, this.start, this.end);\r\n\r\n    this.renderRows(data);\r\n    this.initEventListeners();\r\n  }\r\n\r\n  async loadData(\r\n    id = this.sorted.id,\r\n    order = this.sorted.order,\r\n    start = this.start,\r\n    end = this.end,\r\n    from = this.from,\r\n    to = this.to\r\n    ) {\r\n    this.url.searchParams.set('_sort', id);\r\n    this.url.searchParams.set('_order', order);\r\n    this.url.searchParams.set('_start', start);\r\n    this.url.searchParams.set('_end', end);\r\n\r\n    if (from) {\r\n      this.url.searchParams.set('from', from.toISOString());\r\n    }\r\n    \r\n    if (to) {\r\n      this.url.searchParams.set('to', to.toISOString());\r\n    }\r\n\r\n    this.url.searchParams.delete('title_like');\r\n    if (this.titleLike !== '') {\r\n      this.url.searchParams.set('title_like', decodeURI(this.titleLike));\r\n    }\r\n\r\n    this.url.searchParams.delete('status');\r\n    if (this.status !== '') {\r\n      this.url.searchParams.set('status', this.status);\r\n    }\r\n\r\n    if (this.prices) {\r\n      const { from, to } = this.prices;\r\n\r\n      this.url.searchParams.set('price_gte', from);\r\n      this.url.searchParams.set('price_lte', to);\r\n    }\r\n\r\n    this.element.classList.add('sortable-table_loading');\r\n\r\n    const data = await fetchJson(this.url.toString());\r\n\r\n    this.element.classList.remove('sortable-table_loading');\r\n\r\n    return data;\r\n  }\r\n\r\n  addRows(data) {\r\n    this.data = data;\r\n\r\n    this.subElements.body.innerHTML = this.getTableRows(data);\r\n  }\r\n\r\n  update(data) {\r\n    const rows = document.createElement('div');\r\n\r\n    this.data = [...this.data, ...data];\r\n    rows.innerHTML = this.getTableRows(data);\r\n\r\n    this.subElements.body.append(...rows.childNodes);\r\n  }\r\n\r\n  filterByName(name) {\r\n    this.titleLike = name;\r\n\r\n    this.getNewData();\r\n  }\r\n\r\n  filterByStatus(status) {\r\n    this.status = status;\r\n\r\n    this.getNewData();\r\n  }\r\n\r\n  filterByPrice({ from, to }) {\r\n    this.prices = {from, to};\r\n\r\n    this.getNewData();\r\n  }\r\n\r\n  async getNewData() {\r\n    this.resetCountParams();\r\n\r\n    const data = await this.loadData();\r\n\r\n    this.renderRows(data);\r\n  }\r\n\r\n  getTableHeader() {\r\n    return `<div data-element=\"header\" class=\"sortable-table__header sortable-table__row\">\r\n      ${this.headersConfig.map(item => this.getHeaderRow(item)).join('')}\r\n    </div>`;\r\n  }\r\n\r\n  getHeaderRow({id, title, sortable}) {\r\n    const order = this.sorted.id === id ? this.sorted.order : 'asc';\r\n\r\n    return `\r\n      <div class=\"sortable-table__cell\" data-id=\"${id}\" data-sortable=\"${sortable}\" data-order=\"${order}\">\r\n        <span>${title}</span>\r\n        ${this.getHeaderSortingArrow(id)}\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  getHeaderSortingArrow(id) {\r\n    const isOrderExist = this.sorted.id === id ? this.sorted.order : '';\r\n\r\n    return isOrderExist\r\n      ? `<span data-element=\"arrow\" class=\"sortable-table__sort-arrow\">\r\n          <span class=\"sort-arrow\"></span>\r\n        </span>`\r\n      : '';\r\n  }\r\n\r\n  getTableBody(data) {\r\n    return `\r\n      <div data-element=\"body\" class=\"sortable-table__body\">\r\n        ${this.getTableRows(data)}\r\n      </div>`;\r\n  }\r\n\r\n  getTableRows(data) {\r\n    return data.map(item => `\r\n      <a href=\"/${URL_PATH}products/${item.id}\" class=\"sortable-table__row\">\r\n        ${this.getTableRow(item, data)}\r\n      </a>`\r\n    ).join('');\r\n  }\r\n\r\n  getTableRow(item) {\r\n    const cells = this.headersConfig.map(({id, template}) => {\r\n      return {\r\n        id,\r\n        template\r\n      };\r\n    });\r\n\r\n    return cells.map(({id, template}) => {\r\n      return template\r\n        ? template(item[id])\r\n        : `<div class=\"sortable-table__cell\">${item[id]}</div>`;\r\n    }).join('');\r\n  }\r\n\r\n  getTable() {\r\n    return `\r\n      <div class=\"sortable-table\">\r\n        ${this.getTableHeader()}\r\n        ${this.getTableBody(this.data)}\r\n\r\n        <div data-element=\"loading\" class=\"loading-line sortable-table__loading-line\"></div>\r\n\r\n        <div data-element=\"emptyPlaceholder\" class=\"sortable-table__empty-placeholder\">\r\n          No products\r\n        </div>\r\n      </div>`;\r\n  }\r\n\r\n  initEventListeners() {\r\n    this.subElements.header.addEventListener('pointerdown', this.onSortClick);\r\n    document.addEventListener('scroll', this.onWindowScroll);\r\n  }\r\n\r\n  sortOnClient(id, order) {\r\n    const sortedData = this.sortData(id, order);\r\n\r\n    this.subElements.body.innerHTML = this.getTableRows(sortedData);\r\n  }\r\n\r\n  async sortOnServer(\r\n    id,\r\n    order,\r\n    start = this.start,\r\n    end = this.end\r\n  ) {\r\n    const data = await this.loadData(id, order, start, end);\r\n\r\n    this.renderRows(data);\r\n  }\r\n\r\n  renderRows(data) {\r\n    if (data.length) {\r\n      this.element.classList.remove('sortable-table_empty');\r\n      this.addRows(data);\r\n    } else {\r\n      this.element.classList.add('sortable-table_empty');\r\n    }\r\n  }\r\n\r\n  sortData(id, order) {\r\n    const arr = [...this.data];\r\n    const column = this.headersConfig.find(item => item.id === id);\r\n    const {sortType, customSorting} = column;\r\n    const direction = order === 'asc' ? 1 : -1;\r\n\r\n    return arr.sort((a, b) => {\r\n      switch (sortType) {\r\n      case 'number':\r\n        return direction * (a[id] - b[id]);\r\n      case 'string':\r\n        return direction * a[id].localeCompare(b[id], 'ru');\r\n      case 'custom':\r\n        return direction * customSorting(a, b);\r\n      default:\r\n        return direction * (a[id] - b[id]);\r\n      }\r\n    });\r\n  }\r\n\r\n  getSubElements(element) {\r\n    const elements = element.querySelectorAll('[data-element]');\r\n\r\n    return [...elements].reduce((accum, subElement) => {\r\n      accum[subElement.dataset.element] = subElement;\r\n\r\n      return accum;\r\n    }, {});\r\n  }\r\n\r\n  resetCountParams() {\r\n    this.start = 0;\r\n    this.end = this.step;\r\n  }\r\n\r\n  remove() {\r\n    this.element.remove();\r\n    document.removeEventListener('scroll', this.onWindowScroll);\r\n  }\r\n\r\n  destroy() {\r\n    this.remove();\r\n    this.subElements = {};\r\n  }\r\n}\r\n","export default class DoubleSlider {\n  element;\n  subElements = {};\n\n  onThumbPointerMove = event => {\n    event.preventDefault();\n\n    const {\n      left: innerLeft,\n      right: innerRight,\n      width\n    } = this.subElements.inner.getBoundingClientRect();\n\n    if (this.dragging === this.subElements.thumbLeft) {\n      let newLeft = (event.clientX - innerLeft + this.shiftX) / width;\n\n      if (newLeft < 0) {\n        newLeft = 0;\n      }\n      newLeft *= 100;\n      const right = parseFloat(this.subElements.thumbRight.style.right);\n\n      if (newLeft + right > 100) {\n        newLeft = 100 - right;\n      }\n\n      this.dragging.style.left = this.subElements.progress.style.left = newLeft + '%';\n      this.subElements.from.innerHTML = this.formatValue(this.getValue().from);\n    }\n\n    if (this.dragging === this.subElements.thumbRight) {\n      let newRight = (innerRight - event.clientX - this.shiftX) / width;\n\n      if (newRight < 0) {\n        newRight = 0;\n      }\n      newRight *= 100;\n\n      const left = parseFloat(this.subElements.thumbLeft.style.left);\n\n      if (left + newRight > 100) {\n        newRight = 100 - left;\n      }\n      this.dragging.style.right = this.subElements.progress.style.right = newRight + '%';\n      this.subElements.to.innerHTML = this.formatValue(this.getValue().to);\n    }\n  };\n\n  onThumbPointerUp = () => {\n    this.element.classList.remove('range-slider_dragging');\n\n    document.removeEventListener('pointermove', this.onThumbPointerMove);\n    document.removeEventListener('pointerup', this.onThumbPointerUp);\n\n    this.element.dispatchEvent(new CustomEvent('range-select', {\n      detail: this.getValue(),\n      bubbles: true\n    }));\n  };\n\n  constructor({\n    min = 100,\n    max = 200,\n    formatValue = value => '$' + value,\n    selected = {\n      from: min,\n      to: max\n    }\n  } = {}) {\n    this.min = min;\n    this.max = max;\n    this.formatValue = formatValue;\n    this.selected = selected;\n\n    this.render();\n  }\n\n  get template() {\n    const {\n      from,\n      to\n    } = this.selected;\n\n    return `<div class=\"range-slider\">\n      <span data-element=\"from\">${this.formatValue(from)}</span>\n      <div data-element=\"inner\" class=\"range-slider__inner\">\n        <span data-element=\"progress\" class=\"range-slider__progress\"></span>\n        <span data-element=\"thumbLeft\" class=\"range-slider__thumb-left\"></span>\n        <span data-element=\"thumbRight\" class=\"range-slider__thumb-right\"></span>\n      </div>\n      <span data-element=\"to\">${this.formatValue(to)}</span>\n    </div>`;\n  }\n\n  render() {\n    const element = document.createElement('div');\n\n    element.innerHTML = this.template;\n\n    this.element = element.firstElementChild;\n    this.element.ondragstart = () => false;\n\n    this.subElements = this.getSubElements(element);\n\n    this.initEventListeners();\n\n    this.update();\n  }\n\n  initEventListeners() {\n    const {\n      thumbLeft,\n      thumbRight\n    } = this.subElements;\n\n    thumbLeft.addEventListener('pointerdown', event => this.onThumbPointerDown(event));\n    thumbRight.addEventListener('pointerdown', event => this.onThumbPointerDown(event));\n  }\n\n  getSubElements(element) {\n    const elements = element.querySelectorAll('[data-element]');\n\n    return [...elements].reduce((accum, subElement) => {\n      accum[subElement.dataset.element] = subElement;\n\n      return accum;\n    }, {});\n  }\n\n  remove() {\n    this.element.remove();\n  }\n\n  destroy() {\n    this.remove();\n    document.removeEventListener('pointermove', this.onThumbPointerMove);\n    document.removeEventListener('pointerup', this.onThumbPointerUp);\n  }\n\n  update() {\n    const rangeTotal = this.max - this.min;\n    const left = Math.floor((this.selected.from - this.min) / rangeTotal * 100) + '%';\n    const right = Math.floor((this.max - this.selected.to) / rangeTotal * 100) + '%';\n\n    this.subElements.progress.style.left = left;\n    this.subElements.progress.style.right = right;\n\n    this.subElements.thumbLeft.style.left = left;\n    this.subElements.thumbRight.style.right = right;\n  }\n\n  onThumbPointerDown(event) {\n    const thumbElem = event.target;\n\n    event.preventDefault();\n\n    const {\n      left,\n      right\n    } = thumbElem.getBoundingClientRect();\n\n    if (thumbElem === this.subElements.thumbLeft) {\n      this.shiftX = right - event.clientX;\n    } else {\n      this.shiftX = left - event.clientX;\n    }\n\n    this.dragging = thumbElem;\n\n    this.element.classList.add('range-slider_dragging');\n\n    document.addEventListener('pointermove', this.onThumbPointerMove);\n    document.addEventListener('pointerup', this.onThumbPointerUp);\n  }\n\n  getValue() {\n    const rangeTotal = this.max - this.min;\n    const {\n      left\n    } = this.subElements.thumbLeft.style;\n    const {\n      right\n    } = this.subElements.thumbRight.style;\n\n    const from = Math.round(this.min + parseFloat(left) * 0.01 * rangeTotal);\n    const to = Math.round(this.max - parseFloat(right) * 0.01 * rangeTotal);\n\n    return {\n      from,\n      to\n    };\n  }\n}\n","import DoubleSlider from '../double-slider/index.js';\n\nexport default class FilterPanel {\n  subElements = {};\n  components = {};\n\n  constructor({\n    sliderMin = 0,\n    sliderMax = 4000\n  } = {}) {\n    this.sliderMin = sliderMin;\n    this.sliderMax = sliderMax;\n\n    this.render();\n  }\n\n  get getTemplate() {\n    return `\n      <div class=\"content-box content-box_small\">\n        <form class=\"form-grid form-inline\">\n          <div class=\"form-group\">\n            <label class=\"form-label\">Сортировать по:</label>\n            <input type=\"text\" data-element=\"filterName\" class=\"form-control\" placeholder=\"Название товара\">\n          </div>\n          <div class=\"form-group\" data-element=\"sliderContainer\">\n            <label class=\"form-label\">Цена:</label>\n            <div data-element=\"doubleSlider\"></div>\n          </div>\n          <div class=\"form-group\">\n            <label class=\"form-label\">Статус:</label>\n            <select class=\"form-control\" data-element=\"filterStatus\">\n              <option value=\"\" selected=\"\">Любой</option>\n              <option value=\"1\">Активный</option>\n              <option value=\"0\">Неактивный</option>\n            </select>\n          </div>\n        </form>\n      </div>\n    `;\n  }\n\n  render() {\n    const element = document.createElement('div');\n\n    element.innerHTML = this.getTemplate;\n\n    this.element = element.firstElementChild;\n    this.subElements = this.getSubElements();\n\n    this.initComponents();\n    this.renderComponents();\n\n    this.addEventListeners();\n  }\n\n  getSubElements() {\n    const subElements = this.element.querySelectorAll('[data-element]');\n\n    return [...subElements].reduce((accum, subElement) => {\n      accum[subElement.dataset.element] = subElement;\n      return accum;\n    }, {});\n  }\n\n  initComponents() {\n    const doubleSlider = new DoubleSlider({\n      min: this.sliderMin,\n      max: this.sliderMax\n    });\n\n    this.components = {doubleSlider};\n  }\n\n  renderComponents() {\n    Object.entries(this.components).forEach(([title, component]) => {\n      const container = this.subElements[title];\n\n      container.append(component.element);\n    });\n  }\n\n  addEventListeners() {\n    const {\n      filterName,\n      filterStatus\n    } = this.subElements;\n\n    const { doubleSlider } = this.components;\n\n    filterName.addEventListener('input', () => {\n      const { value } = filterName;\n\n      this.element.dispatchEvent(new CustomEvent('change-name', {\n        detail: value,\n        bubbles: true\n      }));\n    });\n\n    filterStatus.addEventListener('change', event => {\n      const { value } = event.target;\n\n      this.element.dispatchEvent(new CustomEvent('change-status', {\n        detail: value,\n        bubbles: true\n      }));\n    });\n\n    doubleSlider.element.addEventListener('range-select', ({ detail }) => {\n      this.element.dispatchEvent(new CustomEvent('range-select', {\n        detail,\n        bubbles: true\n      }));\n    });\n  }\n\n  remove() {\n    this.element.remove();\n  }\n\n  destroy() {\n    this.remove();\n\n    for (const component of Object.values(this.components)) {\n      component.destroy();\n    }\n  }\n}","const header = [\n  {\n    id: 'images',\n    title: 'Фото',\n    sortable: false,\n    template: data => {\n      return `\n          <div class=\"sortable-table__cell\">\n            <img class=\"sortable-table-image\" alt=\"Image\" src=\"${data[0] ? data[0].url : '../not-found.svg'}\">\n          </div>\n        `;\n    }\n  },\n  {\n    id: 'title',\n    title: 'Название',\n    sortable: true,\n    sortType: 'string'\n  },\n  {\n    id: 'subcategory',\n    title: 'Категория',\n    sortable: false,\n    sortType: 'string',\n    template: ({ title, category }) => {\n      const tooltipMessage = `\n        <div class='sortable-table-tooltip'>\n          <span class='sortable-table-tooltip__category'>${title}</span> / <b class='sortable-table-tooltip__subcategory'>${category.title}</b>\n        </div>\n      `;\n\n      return `\n          <div class=\"sortable-table__cell\">\n            <span data-tooltip=\"${tooltipMessage}\">\n              ${category.title}\n            </span>\n          </div>\n        `;\n    }\n  },\n  {\n    id: 'quantity',\n    title: 'Количество',\n    sortable: true,\n    sortType: 'number'\n  },\n  {\n    id: 'price',\n    title: 'Цена',\n    sortable: true,\n    sortType: 'number'\n  },\n  {\n    id: 'status',\n    title: 'Статус',\n    sortable: true,\n    sortType: 'string',\n    template: status => {\n      const value = status === 0 ? 'Неактивен' : 'Активен';\n\n      return `<div class=\"sortable-table__cell\">${value}</div>`;\n    }\n  },\n];\n\nexport default header;\n","import SortableTable from '../../../components/sortable-table/index.js';\r\nimport FilterPanel from '../../../components/filter-panel/index.js';\r\nimport header from './products-header.js';\r\n\r\nconst URL_PATH = process.env.URL_PATH;\r\n\r\nexport default class ProductsPage {\r\n  subElements = {};\r\n  components = {};\r\n\r\n  sliderFrom = 0;\r\n  sliderTo = 4000;\r\n\r\n  get getTemplate() {\r\n    return `\r\n      <div class=\"products-list\">\r\n        <div class=\"content__top-panel\">\r\n          <h1 class=\"page-title\">Товары</h1>\r\n          <a href=\"/${URL_PATH}products/add\" class=\"button-primary\">Добавить товар</a>\r\n        </div>\r\n        <div data-element=\"filterPanel\">\r\n        </div>\r\n        <div data-element=\"productsContainer\" class=\"products-list__container\">\r\n          <div data-element=\"sortableTable\"></div>\r\n        </div>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  async render() {\r\n    const element = document.createElement('div');\r\n\r\n    element.innerHTML = this.getTemplate;\r\n\r\n    this.element = element.firstElementChild;\r\n    this.subElements = this.getSubElements(this.element);\r\n\r\n    await this.initComponents();\r\n    this.renderComponents();\r\n\r\n    this.addEventListeners();\r\n\r\n    return this.element;\r\n  }\r\n\r\n  getSubElements(element) {\r\n    const subElements = element.querySelectorAll('[data-element]');\r\n\r\n    return [...subElements].reduce((accum, subElement) => {\r\n      accum[subElement.dataset.element] = subElement;\r\n      return accum;\r\n    }, {});\r\n  }\r\n\r\n  initComponents() {\r\n    const filterPanel = new FilterPanel({\r\n      sliderMin: this.sliderFrom,\r\n      sliderMax: this.sliderTo\r\n    });\r\n    \r\n    const sortableTable = new SortableTable(header, {\r\n      url: `api/rest/products?_embed=subcategory.category`,\r\n      step: 30,\r\n      isSortLocally: false\r\n    });\r\n\r\n    this.components = {\r\n      filterPanel,\r\n      sortableTable\r\n    };\r\n  }\r\n\r\n  renderComponents() {\r\n    Object.entries(this.components).forEach(([title, component]) => {\r\n      const container = this.subElements[title];\r\n\r\n      container.append(component.element);\r\n    });\r\n  }\r\n\r\n  addEventListeners() {\r\n    const { filterPanel, sortableTable } = this.components;\r\n\r\n    filterPanel.element.addEventListener('change-name', ({ detail: name }) => {\r\n      sortableTable.filterByName(name);\r\n    });\r\n\r\n    filterPanel.element.addEventListener('change-status', ({ detail: status }) => {\r\n      sortableTable.filterByStatus(status);\r\n    });\r\n\r\n    filterPanel.element.addEventListener('range-select', ({ detail: prices }) => {\r\n      sortableTable.filterByPrice(prices);\r\n    });\r\n  }\r\n\r\n  remove() {\r\n    this.element.remove();\r\n  }\r\n\r\n  destroy() {\r\n    this.remove();\r\n\r\n    for (const component of Object.values(this.components)) {\r\n      component.destroy();\r\n    }\r\n  }\r\n}","// same as fetch, but throws FetchError in case of errors\r\n// status >= 400 is an error\r\n// network error / json error are errors\r\n\r\nexport default async function(url, params) {\r\n  let response;\r\n\r\n  try {\r\n    // NOTE: \"toString\" call needed for correct work of \"jest-fetch-mock\"\r\n    response = await fetch(url.toString(), params);\r\n  } catch(err) {\r\n    throw new FetchError(response, \"Network error has occurred.\");\r\n  }\r\n\r\n  let body;\r\n\r\n  if (!response.ok) {\r\n    let errorText = response.statusText; // Not Found (for 404)\r\n\r\n    try {\r\n      body = await response.json();\r\n\r\n      errorText = (body.error && body.error.message) || (body.data && body.data.error && body.data.error.message) || errorText;\r\n    } catch (error) { /* ignore failed body */ }\r\n\r\n    let message = `Error ${response.status}: ${errorText}`;\r\n\r\n    throw new FetchError(response, body, message);\r\n  }\r\n\r\n  try {\r\n    return await response.json();\r\n  } catch(err) {\r\n    throw new FetchError(response, null, err.message);\r\n  }\r\n}\r\n\r\nexport class FetchError extends Error {\r\n  name = \"FetchError\";\r\n\r\n  constructor(response, body, message) {\r\n    super(message);\r\n    this.response = response;\r\n    this.body = body;\r\n  }\r\n}\r\n\r\n// handle uncaught failed fetch through\r\nwindow.addEventListener('unhandledrejection', event => {\r\n  if (event.reason instanceof FetchError) {\r\n    alert(event.reason.message);\r\n  }\r\n});\r\n\r\n"],"sourceRoot":""}